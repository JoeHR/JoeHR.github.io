(window.webpackJsonp=window.webpackJsonp||[]).push([[14],{554:function(s,t,n){s.exports=n.p+"assets/img/npmscript-01-01.a7ebbef1.png"},555:function(s,t,n){s.exports=n.p+"assets/img/npmscript-01-02.fc1fc8e4.png"},556:function(s,t,n){s.exports=n.p+"assets/img/npmscript-01-03.7544323b.png"},644:function(s,t,n){"use strict";n.r(t);var a=n(21),r=Object(a.a)({},(function(){var s=this,t=s.$createElement,a=s._self._c||t;return a("ContentSlotsDistributor",{attrs:{"slot-key":s.$parent.slotKey}},[a("h1",{attrs:{id:"why-npm-script"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#why-npm-script"}},[s._v("#")]),s._v(" why npm script?")]),s._v(" "),a("p",[s._v("npm script 相比 grunt、gulp 之类的构建工具简单很多，因为它消除了这些构建工具所带来的抽象层，并带给我们更大的自由度。随着社区的发展，各种基础工具你都可以信手拈来，只要你会使用 "),a("a",{attrs:{href:"https://www.npmjs.com/",target:"_blank",rel:"noopener noreferrer"}},[s._v("npmjs.com"),a("OutboundLink")],1),s._v(" 去搜索，或者去 "),a("a",{attrs:{href:"https://libraries.io/",target:"_blank",rel:"noopener noreferrer"}},[s._v("libraries.io"),a("OutboundLink")],1),s._v(" 上搜索。")]),s._v(" "),a("h2",{attrs:{id:"初识-npm-script"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#初识-npm-script"}},[s._v("#")]),s._v(" 初识 npm script")]),s._v(" "),a("h3",{attrs:{id:"用-npm-init-快速创建项目"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#用-npm-init-快速创建项目"}},[s._v("#")]),s._v(" 用 npm init 快速创建项目")]),s._v(" "),a("p",[s._v("开始探索 npm script 之前，我们先聊聊这些 scripts 所依赖的文件 package.json，以它为基础的 npm 则是 node.js 社区蓬勃发展的顶梁柱。")]),s._v(" "),a("p",[s._v("npm 为我们提供了快速创建 package.json 文件的命令 npm init，执行该命令会问几个基本问题，如包名称、版本号、作者信息、入口文件、仓库地址、许可协议等，多数问题已经提供了默认值，你可以在问题后敲回车接受默认值：")]),s._v(" "),a("div",{staticClass:"language-shell extra-class"},[a("pre",{pre:!0,attrs:{class:"language-shell"}},[a("code",[a("span",{pre:!0,attrs:{class:"token function"}},[s._v("npm")]),s._v(" init\n")])])]),a("div",{staticClass:"language-js extra-class"},[a("pre",{pre:!0,attrs:{class:"language-js"}},[a("code",[a("span",{pre:!0,attrs:{class:"token comment"}},[s._v("// package.json")]),s._v("\n\n"),a("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("package")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token literal-property property"}},[s._v("name")]),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v(":")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("(")]),s._v("hello"),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v("-")]),s._v("npm"),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v("-")]),s._v("script"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(")")]),s._v("\n"),a("span",{pre:!0,attrs:{class:"token literal-property property"}},[s._v("version")]),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v(":")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("(")]),a("span",{pre:!0,attrs:{class:"token number"}},[s._v("0.1")]),a("span",{pre:!0,attrs:{class:"token number"}},[s._v(".0")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(")")]),s._v("\n"),a("span",{pre:!0,attrs:{class:"token literal-property property"}},[s._v("description")]),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v(":")]),s._v(" hello npm script\nentry point"),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v(":")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("(")]),s._v("index"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(".")]),s._v("js"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(")")]),s._v("\ntest command"),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v(":")]),s._v("\ngit repository"),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v(":")]),s._v("\n"),a("span",{pre:!0,attrs:{class:"token literal-property property"}},[s._v("keywords")]),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v(":")]),s._v(" npm"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(",")]),s._v(" script\n"),a("span",{pre:!0,attrs:{class:"token literal-property property"}},[s._v("license")]),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v(":")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("(")]),a("span",{pre:!0,attrs:{class:"token constant"}},[s._v("MIT")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(")")]),s._v("\n")])])]),a("p",[s._v("按回车确认就能把package.json 的内容写到文件系统，如果要修改 package.json，可以直接用编辑器编辑，或者再次运行 npm init，npm 默认不会覆盖修改里面已经存在的信息。")]),s._v(" "),a("blockquote",[a("p",[a("strong",[s._v("TIP#1")]),s._v(": 嫌上面的初始化方式太啰嗦？你可以使用 npm init -f（意指 --force，或者使用 --yes）告诉 npm 直接跳过参数问答环节，快速生成 package.json。")])]),s._v(" "),a("p",[a("code",[s._v("npm init")]),s._v(" 初始化出来的package.json 文件内容是可以 通过命令去修改默认配置的")]),s._v(" "),a("div",{staticClass:"language- extra-class"},[a("pre",{pre:!0,attrs:{class:"language-text"}},[a("code",[s._v('npm config set init.author.email "qiaoxinhen@sina.com"\nnpm config set init.author.name "rh"\nnpm config set init.author.url "http://github.com/rh"\nnpm config set init.license "MIT"\nnpm config set init.version "0.1.0"\n')])])]),a("h3",{attrs:{id:"用-npm-run-执行任意命令"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#用-npm-run-执行任意命令"}},[s._v("#")]),s._v(" 用 npm run 执行任意命令")]),s._v(" "),a("p",[s._v("使用 npm init 创建的 package.json 文件中包含了 scripts 字段：")]),s._v(" "),a("div",{staticClass:"language-json extra-class"},[a("pre",{pre:!0,attrs:{class:"language-json"}},[a("code",[a("span",{pre:!0,attrs:{class:"token property"}},[s._v('"scripts"')]),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v(":")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("{")]),s._v("\n  "),a("span",{pre:!0,attrs:{class:"token property"}},[s._v('"test"')]),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v(":")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token string"}},[s._v('"echo \\"Error: no test specified\\" && exit 1"')]),s._v("\n"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("}")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(",")]),s._v("\n")])])]),a("p",[s._v("在终端中运行 npm run test，能看到 Error: no test specified 的输出。npm run test 可以简写为 npm test，或更简单的 npm t，得到的结果是几乎相同的。")]),s._v(" "),a("p",[s._v("和 test 类似，start 也是 npm 内置支持的命令，但是需要先在 scripts 字段中声明该脚本的实际内容，如果没声明就执行 npm start，会直接报错。如下图所示：")]),s._v(" "),a("div",{staticClass:"language-shell extra-class"},[a("pre",{pre:!0,attrs:{class:"language-shell"}},[a("code",[s._v(" Joe@JOERH  F:"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("\\")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("..")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("\\")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("..")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("\\")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("..")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("\\")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("..")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("\\")]),s._v("demo1  "),a("span",{pre:!0,attrs:{class:"token function"}},[s._v("npm")]),s._v(" t\n\n"),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v(">")]),s._v(" demo1@1.0.0 "),a("span",{pre:!0,attrs:{class:"token builtin class-name"}},[s._v("test")]),s._v(" F:"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("\\")]),s._v("myfiles"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("\\")]),s._v("学习"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("\\")]),s._v("study_workspace"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("\\")]),s._v("npmscripts"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("\\")]),s._v("demo1\n"),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v(">")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token builtin class-name"}},[s._v("echo")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token string"}},[s._v('"Error: no test specified"')]),s._v(" "),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v("&&")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token builtin class-name"}},[s._v("exit")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token number"}},[s._v("1")]),s._v("\n\n"),a("span",{pre:!0,attrs:{class:"token string"}},[s._v('"Error: no test specified"')]),s._v("\n"),a("span",{pre:!0,attrs:{class:"token function"}},[s._v("npm")]),s._v(" ERR"),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v("!")]),s._v(" Test failed.  See above "),a("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("for")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token function"}},[s._v("more")]),s._v(" details.\n Joe@JOERH  F:"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("\\")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("..")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("\\")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("..")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("\\")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("..")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("\\")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("..")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("\\")]),s._v("demo1  "),a("span",{pre:!0,attrs:{class:"token function"}},[s._v("npm")]),s._v(" start\n"),a("span",{pre:!0,attrs:{class:"token function"}},[s._v("npm")]),s._v(" ERR"),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v("!")]),s._v(" missing script: start\n\n"),a("span",{pre:!0,attrs:{class:"token function"}},[s._v("npm")]),s._v(" ERR"),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v("!")]),s._v(" A complete log of this run can be found in:\n"),a("span",{pre:!0,attrs:{class:"token function"}},[s._v("npm")]),s._v(" ERR"),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v("!")]),s._v("     C:"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("\\")]),s._v("Users"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("\\")]),s._v("Joe"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("\\")]),s._v("AppData"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("\\")]),s._v("Roaming"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("\\")]),s._v("npm-cache"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("\\")]),s._v("_logs"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("\\")]),a("span",{pre:!0,attrs:{class:"token number"}},[s._v("2019")]),s._v("-12-04T05_44_20_043Z-debug.log\n Joe@JOERH  F:"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("\\")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("..")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("\\")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("..")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("\\")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("..")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("\\")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("..")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("\\")]),s._v("demo1  \n")])])]),a("p",[s._v("那么，npm 是如何管理和执行各种 scripts 的呢？作为 npm 内置的核心功能之一，npm run 实际上是 npm run-script 命令的简写。当我们运行 npm run xxx 时，基本步骤如下：")]),s._v(" "),a("ol",[a("li",[s._v("从 package.json 文件中读取 scripts 对象里面的全部配置；")]),s._v(" "),a("li",[s._v("以传给 npm run 的第一个参数作为键，本例中为 xxx，在 scripts 对象里面获取对应的值作为接下来要执行的命令，如果没找到直接报错；")]),s._v(" "),a("li",[s._v("在系统默认的 shell 中执行上述命令，系统默认 shell 通常是 bash，windows 环境下可能略有不同，稍后再讲。")])]),s._v(" "),a("p",[s._v("如果不带任何参数执行 npm run，它会列出可执行的所有命令，比如下面这样：")]),s._v(" "),a("div",{staticClass:"language-shell extra-class"},[a("pre",{pre:!0,attrs:{class:"language-shell"}},[a("code",[s._v("Available scripts "),a("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("in")]),s._v(" the myproject package:\n  eslint\n    eslint **.js\n")])])]),a("p",[s._v("如果运行 npm run eslint，npm 会在 shell 中运行 eslint **.js。")]),s._v(" "),a("p",[s._v("有没有好奇过上面的 eslint 命令是从哪里来的？其实，npm 在执行指定 script 之前会把 node_modules/.bin 加到环境变量 $PATH 的前面，这意味着任何内含可执行文件的 npm 依赖都可以在 npm script 中直接调用，换句话说，你不需要在 npm script 中加上可执行文件的完整路径，比如 "),a("code",[s._v("./node_modules/.bin/eslint **.js")]),s._v("。")]),s._v(" "),a("p",[a("img",{attrs:{src:n(554),alt:"1575438630539"}})]),s._v(" "),a("h3",{attrs:{id:"创建自定义-npm-script"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#创建自定义-npm-script"}},[s._v("#")]),s._v(" 创建自定义 npm script")]),s._v(" "),a("p",[s._v("以 eslint 为例")]),s._v(" "),a("p",[s._v("再新项目或者任何现有的项目中添加 eslint 自定义脚本的步骤如下")]),s._v(" "),a("ul",[a("li",[s._v("准备被检查的代码")])]),s._v(" "),a("div",{staticClass:"language-javascript extra-class"},[a("pre",{pre:!0,attrs:{class:"language-javascript"}},[a("code",[a("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("const")]),s._v(" str "),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token string"}},[s._v("'some value'")]),s._v("\n\n"),a("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("function")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token function"}},[s._v("fn")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("(")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(")")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("{")]),s._v("\n    console"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(".")]),a("span",{pre:!0,attrs:{class:"token function"}},[s._v("log")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("(")]),a("span",{pre:!0,attrs:{class:"token string"}},[s._v("'some log'")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(")")]),s._v("\n"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("}")]),s._v("\n")])])]),a("ul",[a("li",[s._v("添加 eslint 依赖")])]),s._v(" "),a("p",[s._v("执行安装将 eslint 添加位 devDependencies:")]),s._v(" "),a("div",{staticClass:"language-shell extra-class"},[a("pre",{pre:!0,attrs:{class:"language-shell"}},[a("code",[a("span",{pre:!0,attrs:{class:"token function"}},[s._v("npm")]),s._v(" i "),a("span",{pre:!0,attrs:{class:"token parameter variable"}},[s._v("-D")]),s._v(" eslint\n")])])]),a("ul",[a("li",[s._v("初始化 eslint 配置")])]),s._v(" "),a("p",[s._v("用 eslint 做检查需要配置规则集，存放规则集的文件就是配置文件，使用如下文件生成配置文件：")]),s._v(" "),a("div",{staticClass:"language-shell extra-class"},[a("pre",{pre:!0,attrs:{class:"language-shell"}},[a("code",[s._v("npx eslint "),a("span",{pre:!0,attrs:{class:"token parameter variable"}},[s._v("--init")]),s._v("\n")])])]),a("blockquote",[a("p",[a("strong",[s._v("TIP#3")]),s._v(": 把 eslint 安装为项目依赖而非全局命令，项目可移植性更高。")])]),s._v(" "),a("p",[s._v("在命令行提示中选择 Answer questions about your style，如下图回答几个问题，答案可以根据自己的偏好：")]),s._v(" "),a("p",[a("img",{attrs:{src:n(555),alt:"1575439521810"}})]),s._v(" "),a("p",[s._v("回车后根目录下就有了 .eslintrc.js 配置文件：")]),s._v(" "),a("div",{staticClass:"language-javascript extra-class"},[a("pre",{pre:!0,attrs:{class:"language-javascript"}},[a("code",[s._v("module"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(".")]),s._v("exports "),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("{")]),s._v("\n    "),a("span",{pre:!0,attrs:{class:"token string-property property"}},[s._v("'env'")]),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v(":")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("{")]),s._v("\n        "),a("span",{pre:!0,attrs:{class:"token string-property property"}},[s._v("'browser'")]),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v(":")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token boolean"}},[s._v("true")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(",")]),s._v("\n        "),a("span",{pre:!0,attrs:{class:"token string-property property"}},[s._v("'es6'")]),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v(":")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token boolean"}},[s._v("true")]),s._v("\n    "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("}")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(",")]),s._v("\n    "),a("span",{pre:!0,attrs:{class:"token string-property property"}},[s._v("'extends'")]),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v(":")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token string"}},[s._v("'eslint:recommended'")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(",")]),s._v("\n    "),a("span",{pre:!0,attrs:{class:"token string-property property"}},[s._v("'globals'")]),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v(":")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("{")]),s._v("\n        "),a("span",{pre:!0,attrs:{class:"token string-property property"}},[s._v("'Atomics'")]),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v(":")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token string"}},[s._v("'readonly'")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(",")]),s._v("\n        "),a("span",{pre:!0,attrs:{class:"token string-property property"}},[s._v("'SharedArrayBuffer'")]),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v(":")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token string"}},[s._v("'readonly'")]),s._v("\n    "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("}")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(",")]),s._v("\n    "),a("span",{pre:!0,attrs:{class:"token string-property property"}},[s._v("'parserOptions'")]),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v(":")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("{")]),s._v("\n        "),a("span",{pre:!0,attrs:{class:"token string-property property"}},[s._v("'ecmaVersion'")]),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v(":")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token number"}},[s._v("2018")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(",")]),s._v("\n        "),a("span",{pre:!0,attrs:{class:"token string-property property"}},[s._v("'sourceType'")]),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v(":")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token string"}},[s._v("'module'")]),s._v("\n    "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("}")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(",")]),s._v("\n    "),a("span",{pre:!0,attrs:{class:"token string-property property"}},[s._v("'rules'")]),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v(":")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("{")]),s._v("\n        "),a("span",{pre:!0,attrs:{class:"token string-property property"}},[s._v("'indent'")]),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v(":")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("[")]),s._v("\n            "),a("span",{pre:!0,attrs:{class:"token string"}},[s._v("'error'")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(",")]),s._v("\n            "),a("span",{pre:!0,attrs:{class:"token number"}},[s._v("4")]),s._v("\n        "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("]")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(",")]),s._v("\n        "),a("span",{pre:!0,attrs:{class:"token string-property property"}},[s._v("'linebreak-style'")]),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v(":")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("[")]),s._v("\n            "),a("span",{pre:!0,attrs:{class:"token string"}},[s._v("'error'")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(",")]),s._v("\n            "),a("span",{pre:!0,attrs:{class:"token string"}},[s._v("'windows'")]),s._v("\n        "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("]")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(",")]),s._v("\n        "),a("span",{pre:!0,attrs:{class:"token string-property property"}},[s._v("'quotes'")]),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v(":")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("[")]),s._v("\n            "),a("span",{pre:!0,attrs:{class:"token string"}},[s._v("'error'")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(",")]),s._v("\n            "),a("span",{pre:!0,attrs:{class:"token string"}},[s._v("'single'")]),s._v("\n        "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("]")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(",")]),s._v("\n        "),a("span",{pre:!0,attrs:{class:"token string-property property"}},[s._v("'semi'")]),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v(":")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("[")]),s._v("\n            "),a("span",{pre:!0,attrs:{class:"token string"}},[s._v("'error'")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(",")]),s._v("\n            "),a("span",{pre:!0,attrs:{class:"token string"}},[s._v("'never'")]),s._v("\n        "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("]")]),s._v("\n    "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("}")]),s._v("\n"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("}")]),s._v("\n")])])]),a("ul",[a("li",[a("h3",{attrs:{id:"添加-eslint-命令"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#添加-eslint-命令"}},[s._v("#")]),s._v(" 添加 eslint 命令")])])]),s._v(" "),a("p",[s._v("在 package.json 的 scripts 字段中新增命令 eslint：")]),s._v(" "),a("div",{staticClass:"language-json extra-class"},[a("pre",{pre:!0,attrs:{class:"language-json"}},[a("code",[a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("{")]),s._v("\n  "),a("span",{pre:!0,attrs:{class:"token property"}},[s._v('"scripts"')]),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v(":")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("{")]),s._v("\n    "),a("span",{pre:!0,attrs:{class:"token property"}},[s._v('"eslint"')]),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v(":")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token string"}},[s._v('"eslint --ext .js src"')]),s._v("\n    "),a("span",{pre:!0,attrs:{class:"token property"}},[s._v('"test"')]),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v(":")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token string"}},[s._v('"echo \\"Error: no test specified\\" && exit 1"')]),s._v("\n  "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("}")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(",")]),s._v("\n"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("}")]),s._v("\n")])])]),a("p",[a("strong",[s._v("手动修改 package.json 时一定要注意语法正确。")])]),s._v(" "),a("ul",[a("li",[a("h3",{attrs:{id:"运行-eslint-命令"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#运行-eslint-命令"}},[s._v("#")]),s._v(" 运行 eslint 命令")])])]),s._v(" "),a("p",[s._v("执行 npm run eslint，可以看到，按照官方推荐规则代码里有 3 处不符合规范的地方：")]),s._v(" "),a("p",[a("img",{attrs:{src:n(556),alt:"1575439882702"}})]),s._v(" "),a("h2",{attrs:{id:"运行-多个-npm-script"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#运行-多个-npm-script"}},[s._v("#")]),s._v(" 运行 多个 npm script")]),s._v(" "),a("p",[s._v("现在有一个 前端项目 包含有 js、css、less、scss、json、markdown 等格式的文件， 为保障代码质量，给不同的代码添加检查是很有必要的，代码检查不仅保障代码没有低级的语法错误，还可确保代码都遵守社区的最佳实践和一致的编码风格，在团队协作中尤其有用，即使是个人项目，加上代码检查，也会提高你的效率和质量。")]),s._v(" "),a("p",[s._v("通常会给前端项目加上下面4种代码检查")]),s._v(" "),a("ul",[a("li",[a("p",[s._v("eslint ：可定制的 js 代码检查")])]),s._v(" "),a("li",[a("p",[s._v("stylelint ：可定制的样式文件检查，支持 css、less、scss")])]),s._v(" "),a("li",[a("p",[s._v("jsonlint ： json文件语法检查")])]),s._v(" "),a("li",[a("p",[s._v("markdownlint-cli ： markdown文件检查")])])]),s._v(" "),a("p",[s._v("需要注意的是，html 代码也应该检查，但是工具支持薄弱，就略过不表。此外，为代码添加必要的单元测试也是质量保障的重要手段，常用的单测技术栈是：")]),s._v(" "),a("ul",[a("li",[a("a",{attrs:{href:"https://mochajs.org/",target:"_blank",rel:"noopener noreferrer"}},[s._v("mocha"),a("OutboundLink")],1),s._v("，测试用例组织，测试用例运行和结果收集的框架；")]),s._v(" "),a("li",[a("a",{attrs:{href:"http://chaijs.com/",target:"_blank",rel:"noopener noreferrer"}},[s._v("chai"),a("OutboundLink")],1),s._v("，测试断言库，必要的时候可以结合 "),a("a",{attrs:{href:"http://sinonjs.org/",target:"_blank",rel:"noopener noreferrer"}},[s._v("sinon"),a("OutboundLink")],1),s._v(" 使用；")])]),s._v(" "),a("h3",{attrs:{id:"让多个命令-串行"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#让多个命令-串行"}},[s._v("#")]),s._v(" 让多个命令 串行？")]),s._v(" "),a("div",{staticClass:"language-json extra-class"},[a("pre",{pre:!0,attrs:{class:"language-json"}},[a("code",[a("span",{pre:!0,attrs:{class:"token comment"}},[s._v("// package.json")]),s._v("\n\n"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("{")]),s._v("\n  "),a("span",{pre:!0,attrs:{class:"token property"}},[s._v('"name"')]),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v(":")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token string"}},[s._v('"demo2"')]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(",")]),s._v("\n  "),a("span",{pre:!0,attrs:{class:"token property"}},[s._v('"version"')]),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v(":")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token string"}},[s._v('"1.0.0"')]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(",")]),s._v("\n  "),a("span",{pre:!0,attrs:{class:"token property"}},[s._v('"description"')]),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v(":")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token string"}},[s._v('""')]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(",")]),s._v("\n  "),a("span",{pre:!0,attrs:{class:"token property"}},[s._v('"main"')]),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v(":")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token string"}},[s._v('"index.js"')]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(",")]),s._v("\n  "),a("span",{pre:!0,attrs:{class:"token property"}},[s._v('"scripts"')]),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v(":")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("{")]),s._v("\n    "),a("span",{pre:!0,attrs:{class:"token property"}},[s._v('"lint:js"')]),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v(":")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token string"}},[s._v('"eslint --ext .js src"')]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(",")]),s._v("\n    "),a("span",{pre:!0,attrs:{class:"token property"}},[s._v('"lint:css"')]),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v(":")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token string"}},[s._v('"stylelint .css src"')]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(",")]),s._v("\n    "),a("span",{pre:!0,attrs:{class:"token property"}},[s._v('"lint:json"')]),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v(":")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token string"}},[s._v('"jsonlint --quite false src/test.json"')]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(",")]),s._v("\n    "),a("span",{pre:!0,attrs:{class:"token property"}},[s._v('"lint:markdown"')]),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v(":")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token string"}},[s._v('"markdownlint --config .markdownlint.json .md src"')]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(",")]),s._v("\n    "),a("span",{pre:!0,attrs:{class:"token property"}},[s._v('"mocha"')]),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v(":")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token string"}},[s._v('"mocha --require @babel/register"')]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(",")]),s._v("\n    "),a("span",{pre:!0,attrs:{class:"token property"}},[s._v('"test"')]),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v(":")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token string"}},[s._v('"npm run lint:js && npm run lint:css && npm run lint:json && npm run lint:markdown && npm run mocha"')]),s._v("\n  "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("}")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(",")]),s._v("\n  "),a("span",{pre:!0,attrs:{class:"token property"}},[s._v('"keywords"')]),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v(":")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("[")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("]")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(",")]),s._v("\n  "),a("span",{pre:!0,attrs:{class:"token property"}},[s._v('"author"')]),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v(":")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token string"}},[s._v('""')]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(",")]),s._v("\n  "),a("span",{pre:!0,attrs:{class:"token property"}},[s._v('"license"')]),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v(":")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token string"}},[s._v('"ISC"')]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(",")]),s._v("\n  "),a("span",{pre:!0,attrs:{class:"token property"}},[s._v('"devDependencies"')]),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v(":")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("{")]),s._v("\n    "),a("span",{pre:!0,attrs:{class:"token property"}},[s._v('"@babel/core"')]),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v(":")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token string"}},[s._v('"^7.7.4"')]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(",")]),s._v("\n    "),a("span",{pre:!0,attrs:{class:"token property"}},[s._v('"@babel/node"')]),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v(":")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token string"}},[s._v('"^7.7.4"')]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(",")]),s._v("\n    "),a("span",{pre:!0,attrs:{class:"token property"}},[s._v('"@babel/preset-env"')]),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v(":")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token string"}},[s._v('"^7.7.4"')]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(",")]),s._v("\n    "),a("span",{pre:!0,attrs:{class:"token property"}},[s._v('"@babel/register"')]),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v(":")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token string"}},[s._v('"^7.7.4"')]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(",")]),s._v("\n    "),a("span",{pre:!0,attrs:{class:"token property"}},[s._v('"chai"')]),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v(":")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token string"}},[s._v('"^4.2.0"')]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(",")]),s._v("\n    "),a("span",{pre:!0,attrs:{class:"token property"}},[s._v('"eslint"')]),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v(":")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token string"}},[s._v('"^6.7.2"')]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(",")]),s._v("\n    "),a("span",{pre:!0,attrs:{class:"token property"}},[s._v('"jsonlint"')]),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v(":")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token string"}},[s._v('"latest"')]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(",")]),s._v("\n    "),a("span",{pre:!0,attrs:{class:"token property"}},[s._v('"markdownlint-cli"')]),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v(":")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token string"}},[s._v('"latest"')]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(",")]),s._v("\n    "),a("span",{pre:!0,attrs:{class:"token property"}},[s._v('"mocha"')]),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v(":")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token string"}},[s._v('"^6.2.2"')]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(",")]),s._v("\n    "),a("span",{pre:!0,attrs:{class:"token property"}},[s._v('"stylelint"')]),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v(":")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token string"}},[s._v('"^12.0.0"')]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(",")]),s._v("\n    "),a("span",{pre:!0,attrs:{class:"token property"}},[s._v('"stylelint-config-standard"')]),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v(":")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token string"}},[s._v('"^19.0.0"')]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(",")]),s._v("\n    "),a("span",{pre:!0,attrs:{class:"token property"}},[s._v('"stylelint-scss"')]),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v(":")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token string"}},[s._v('"^3.13.0"')]),s._v("\n  "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("}")]),s._v("\n"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("}")]),s._v("\n\n")])])]),a("p",[s._v("运行 npm t 命令、")]),s._v(" "),a("div",{staticClass:"language- extra-class"},[a("pre",{pre:!0,attrs:{class:"language-text"}},[a("code",[s._v(' Joe@JOERH  F:\\..\\..\\..\\..\\demo2  npm t\n\n> demo2@1.0.0 test F:\\myfiles\\学习\\study_workspace\\npmscripts\\demo2\n> npm run lint:js && npm run lint:css && npm run lint:json && npm run lint:markdown && npm run mocha\n\n\n> demo2@1.0.0 lint:js F:\\myfiles\\学习\\study_workspace\\npmscripts\\demo2\n> eslint --ext .js src\n\n\nF:\\myfiles\\学习\\study_workspace\\npmscripts\\demo2>"node"  "F:\\myfiles\\学习\\study_workspace\\npmscripts\\demo2\\node_modules\\.bin\\\\..\\_eslint@6.7.2@eslint\\bin\\eslint.js" --ext .js src\n\nF:\\myfiles\\学习\\study_workspace\\npmscripts\\demo2\\src\\index.js\n  2:7   error  \'str\' is assigned a value but never used  no-unused-vars\n  4:10  error  \'fn\' is defined but never used            no-unused-vars\n  9:1   error  \'module\' is not defined                   no-undef\n\n✖ 3 problems (3 errors, 0 warnings)\n\n\n> demo2@1.0.0 lint:css F:\\myfiles\\学习\\study_workspace\\npmscripts\\demo2\n> stylelint .css src\n\n\nF:\\myfiles\\学习\\study_workspace\\npmscripts\\demo2>"node"  "F:\\myfiles\\学习\\study_workspace\\npmscripts\\demo2\\node_modules\\.bin\\\\..\\_stylelint@12.0.0@stylelint\\bin\\stylelint.js" .css src\n\nsrc/index.scss\n 8:5  ×  Unknown word   CssSyntaxError\n\n\n> demo2@1.0.0 lint:json F:\\myfiles\\学习\\study_workspace\\npmscripts\\demo2\n> jsonlint --quite false src/test.json\n\n\nF:\\myfiles\\学习\\study_workspace\\npmscripts\\demo2>"node"  "F:\\myfiles\\学习\\study_workspace\\npmscripts\\demo2\\node_modules\\.bin\\\\..\\_jsonlint@1.6.3@jsonlint\\lib\\cli.js" --quite false src/test.json\n{\n  "name": "122",\n  "age": "21"\n}\n\n> demo2@1.0.0 lint:markdown F:\\myfiles\\学习\\study_workspace\\npmscripts\\demo2\n> markdownlint --config .markdownlint.json .md src\n\n\nF:\\myfiles\\学习\\study_workspace\\npmscripts\\demo2>"node"  "F:\\myfiles\\学习\\study_workspace\\npmscripts\\demo2\\node_modules\\.bin\\\\..\\_markdownlint-cli@0.19.0@markdownlint-cli\\markdownlint.js" --config .markdownlint.json .md src\nCannot read or parse config file .markdownlint.json: ENOENT: no such file or directory, open \'.markdownlint.json\'\nsrc/test.md:1 MD041/first-line-heading/first-line-h1 First line in file should be a top level heading [Context: "## Introduction"]\nsrc/test.md:3 MD013/line-length Line length [Expected: 80; Actual: 265]\nsrc/test.md:6 MD001/heading-increment/header-increment Heading levels should only increment by one level at a time [Expected: h3; Actual: h4]    \nsrc/test.md:8 MD013/line-length Line length [Expected: 80; Actual: 118]\nsrc/test.md:9 MD013/line-length Line length [Expected: 80; Actual: 114]\nsrc/test.md:10 MD013/line-length Line length [Expected: 80; Actual: 108]\nsrc/test.md:12 MD013/line-length Line length [Expected: 80; Actual: 322]\nsrc/test.md:23 MD013/line-length Line length [Expected: 80; Actual: 193]\n\n> demo2@1.0.0 mocha F:\\myfiles\\学习\\study_workspace\\npmscripts\\demo2\n> mocha --require @babel/register\n\n\nF:\\myfiles\\学习\\study_workspace\\npmscripts\\demo2>"node"  "F:\\myfiles\\学习\\study_workspace\\npmscripts\\demo2\\node_modules\\.bin\\\\..\\_mocha@6.2.2@mocha\\bin\\mocha" --require @babel/register\n\n\n  测试index.js\nbefore所有的测试用例\n    测试add函数\n在本区块的每个测试用例之前\n      √ 两个参数相加的和\n在本区快的每个测试用例之后\n    测试add函数1\n在本区块的每个测试用例之前\n      √ 两个参数相加的不为和以外的数\n在本区快的每个测试用例之后\nafter所有的测试用例\n\n  demo1测试index.js\nbefore所有的测试用例\n    测试add函数\n在本区块的每个测试用例之前\n      √ 两个参数相加的和\n在本区快的每个测试用例之后\n    测试add函数1\n在本区块的每个测试用例之前\n      √ 两个参数相加的不为和以外的数\n在本区快的每个测试用例之后\nafter所有的测试用例\n\n  测试hello.js\n    sayhello\n      √ should say hello\n\n\n  5 passing (236ms)\n\n Joe@JOERH  F:\\..\\..\\..\\..\\demo2 \n')])])]),a("blockquote",[a("p",[a("strong",[s._v("demo 见 demo2")])])]),s._v(" "),a("p",[s._v("需要注意的是，串行执行的时候如果前序命令失败（通常进程退出码非0），后续全部命令都会终止，我们可以尝试在 index.js 中引入错误（删掉行末的分号）：")]),s._v(" "),a("p",[s._v("** && 或 &  都表示串行**，并且从输出")]),s._v(" "),a("div",{staticClass:"language- extra-class"},[a("pre",{pre:!0,attrs:{class:"language-text"}},[a("code",[s._v("可以看到子命令的执行顺序是严格按照我们在 scripts 中声明的先后顺序来的：\n\neslint ==> stylelint ==> jsonlint ==> markdownlint ==> mocha\n")])])]),a("p",[s._v("但如果前序命令失败，后续命令会继续运行。")]),s._v(" "),a("h3",{attrs:{id:"npm-run-all"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#npm-run-all"}},[s._v("#")]),s._v(" npm-run-all")]),s._v(" "),a("p",[s._v("上面原生方式来运行多条命令很臃肿，可以使用 "),a("font",{attrs:{color:"red"}},[a("code",[s._v("npm-run-all")])]),s._v("实现更轻量和简洁的多名了运行")],1),s._v(" "),a("p",[s._v("先执行 安装命令将  "),a("font",{attrs:{color:"red"}},[a("code",[s._v("npm-run-all")])]),s._v("添加到项目依赖中")],1),s._v(" "),a("div",{staticClass:"language-shell extra-class"},[a("pre",{pre:!0,attrs:{class:"language-shell"}},[a("code",[a("span",{pre:!0,attrs:{class:"token function"}},[s._v("npm")]),s._v(" i npm-run-all "),a("span",{pre:!0,attrs:{class:"token parameter variable"}},[s._v("-D")]),s._v("\n")])])]),a("p",[s._v("然后修改 package.json 实现多命令的串行执行：")]),s._v(" "),a("div",{staticClass:"language-json extra-class"},[a("pre",{pre:!0,attrs:{class:"language-json"}},[a("code",[s._v("  "),a("span",{pre:!0,attrs:{class:"token property"}},[s._v('"scripts"')]),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v(":")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("{")]),s._v("\n    "),a("span",{pre:!0,attrs:{class:"token property"}},[s._v('"lint:js"')]),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v(":")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token string"}},[s._v('"eslint --ext .js src"')]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(",")]),s._v("\n    "),a("span",{pre:!0,attrs:{class:"token property"}},[s._v('"lint:css"')]),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v(":")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token string"}},[s._v('"stylelint .css src"')]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(",")]),s._v("\n    "),a("span",{pre:!0,attrs:{class:"token property"}},[s._v('"lint:json"')]),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v(":")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token string"}},[s._v('"jsonlint --quite false src/test.json"')]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(",")]),s._v("\n    "),a("span",{pre:!0,attrs:{class:"token property"}},[s._v('"lint:markdown"')]),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v(":")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token string"}},[s._v('"markdownlint --config .markdownlint.json .md src"')]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(",")]),s._v("\n    "),a("span",{pre:!0,attrs:{class:"token property"}},[s._v('"mocha"')]),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v(":")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token string"}},[s._v('"mocha --require @babel/register"')]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(",")]),s._v("\n    "),a("span",{pre:!0,attrs:{class:"token property"}},[s._v('"//"')]),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v(":")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token string"}},[s._v('"npm run lint:js && npm run lint:css && npm run lint:json && npm run lint:markdown && npm run mocha"')]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(",")]),s._v("\n    "),a("span",{pre:!0,attrs:{class:"token property"}},[s._v('"test1"')]),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v(":")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token string"}},[s._v('"npm-run-all lint:js lint:css lint:json lint:markdown mocha"')]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(",")]),s._v("\n    "),a("span",{pre:!0,attrs:{class:"token property"}},[s._v('"test2"')]),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v(":")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token string"}},[s._v('"npm-run-all lint:* mocha"')]),s._v("\n  "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("}")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(",")]),s._v("\n")])])]),a("h2",{attrs:{id:"参数和注释"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#参数和注释"}},[s._v("#")]),s._v(" 参数和注释")]),s._v(" "),a("Vssue",{attrs:{title:"Vssue Demo"}})],1)}),[],!1,null,null,null);t.default=r.exports}}]);