(window.webpackJsonp=window.webpackJsonp||[]).push([[59],{654:function(s,t,e){"use strict";e.r(t);var a=e(21),n=Object(a.a)({},(function(){var s=this,t=s.$createElement,e=s._self._c||t;return e("ContentSlotsDistributor",{attrs:{"slot-key":s.$parent.slotKey}},[e("h2",{attrs:{id:"相关概念"}},[e("a",{staticClass:"header-anchor",attrs:{href:"#相关概念"}},[s._v("#")]),s._v(" 相关概念")]),s._v(" "),e("p",[s._v("Redis 是完全开源免费的，遵守BSD 开源许可协议，是一个高性能的 "),e("code",[s._v("key-value")]),s._v(" 数据库")]),s._v(" "),e("p",[s._v("Redis 与其他 "),e("code",[s._v("key-value")]),s._v("缓存产品相比：支持数据的持久化，多数据结构list、set、zset、hash 等的存储，支持数据备份，支持事务，数据的原子性（要么不做要么全做）")]),s._v(" "),e("p",[s._v("应用场景：缓存（读写性能优异），计数&消息系统（高并发、发布/订阅阻塞队列功能），分布式会话session & 分布式锁（秒杀场景）")]),s._v(" "),e("table",[e("thead",[e("tr",[e("th",[s._v("分类")]),s._v(" "),e("th",[s._v("Redis")]),s._v(" "),e("th",[s._v("Mongo")])])]),s._v(" "),e("tbody",[e("tr",[e("td",[s._v("存储方式")]),s._v(" "),e("td",[s._v("key-value")]),s._v(" "),e("td",[s._v("document")])]),s._v(" "),e("tr",[e("td",[s._v("使用方式&可靠性")]),s._v(" "),e("td"),s._v(" "),e("td",[s._v("sql &完整的ACID 事务支持")])]),s._v(" "),e("tr",[e("td",[s._v("应用场景")]),s._v(" "),e("td",[s._v("高性能缓存")]),s._v(" "),e("td",[s._v("海量数据分析")])])])]),s._v(" "),e("h2",{attrs:{id:"安装和使用"}},[e("a",{staticClass:"header-anchor",attrs:{href:"#安装和使用"}},[s._v("#")]),s._v(" 安装和使用")]),s._v(" "),e("p",[s._v("安装方法一： "),e("a",{attrs:{href:"https://redis.io/download",target:"_blank",rel:"noopener noreferrer"}},[s._v("redis"),e("OutboundLink")],1),s._v(" 官网下载源码安装")]),s._v(" "),e("p",[s._v("安装方法二： "),e("a",{attrs:{href:"https://redis.io/download",target:"_blank",rel:"noopener noreferrer"}},[s._v("redis dowload"),e("OutboundLink")],1),s._v("页面 有  docker 安装 redis 的连接")]),s._v(" "),e("p",[s._v("编写 docker-compose.yml")]),s._v(" "),e("div",{staticClass:"language-yml extra-class"},[e("pre",{pre:!0,attrs:{class:"language-yml"}},[e("code",[e("span",{pre:!0,attrs:{class:"token key atrule"}},[s._v("version")]),e("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(":")]),s._v(" "),e("span",{pre:!0,attrs:{class:"token string"}},[s._v("'3'")]),s._v("\n"),e("span",{pre:!0,attrs:{class:"token key atrule"}},[s._v("services")]),e("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(":")]),s._v("\n  "),e("span",{pre:!0,attrs:{class:"token key atrule"}},[s._v("redis-test")]),e("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(":")]),s._v("\n    "),e("span",{pre:!0,attrs:{class:"token key atrule"}},[s._v("image")]),e("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(":")]),s._v(" "),e("span",{pre:!0,attrs:{class:"token string"}},[s._v("'redis'")]),s._v("\n    "),e("span",{pre:!0,attrs:{class:"token key atrule"}},[s._v("restart")]),e("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(":")]),s._v(" always\n    "),e("span",{pre:!0,attrs:{class:"token key atrule"}},[s._v("container_name")]),e("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(":")]),s._v(" "),e("span",{pre:!0,attrs:{class:"token string"}},[s._v("'redis-test'")]),s._v("\n    "),e("span",{pre:!0,attrs:{class:"token key atrule"}},[s._v("ports")]),e("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(":")]),s._v("\n      "),e("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("-")]),s._v(" 15001"),e("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(":")]),e("span",{pre:!0,attrs:{class:"token number"}},[s._v("6379")]),s._v("\n    "),e("span",{pre:!0,attrs:{class:"token key atrule"}},[s._v("volumes")]),e("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(":")]),s._v("\n      "),e("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("-")]),s._v(" /home/redistest"),e("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(":")]),s._v("/data\n    "),e("span",{pre:!0,attrs:{class:"token key atrule"}},[s._v("command")]),e("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(":")]),s._v(" "),e("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("[")]),e("span",{pre:!0,attrs:{class:"token string"}},[s._v("'redis-server'")]),e("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(",")]),s._v(" "),e("span",{pre:!0,attrs:{class:"token string"}},[s._v("'--requirepass'")]),e("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(",")]),s._v(" "),e("span",{pre:!0,attrs:{class:"token string"}},[s._v("'123456'")]),e("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("]")]),s._v("\n\n")])])]),e("p",[s._v("上传docker-compose.yml 到 /home/redistest 目录,然后运行下面命令即可安装运行  redis 镜像")]),s._v(" "),e("div",{staticClass:"language-shell extra-class"},[e("pre",{pre:!0,attrs:{class:"language-shell"}},[e("code",[e("span",{pre:!0,attrs:{class:"token function"}},[s._v("docker-compose")]),s._v(" up "),e("span",{pre:!0,attrs:{class:"token parameter variable"}},[s._v("-d")]),s._v("\n")])])]),e("p",[s._v("上面的步骤也可以直接用一句命令代替运行：")]),s._v(" "),e("div",{staticClass:"language-shell extra-class"},[e("pre",{pre:!0,attrs:{class:"language-shell"}},[e("code",[e("span",{pre:!0,attrs:{class:"token function"}},[s._v("docker")]),s._v(" run "),e("span",{pre:!0,attrs:{class:"token parameter variable"}},[s._v("-itd")]),s._v(" "),e("span",{pre:!0,attrs:{class:"token parameter variable"}},[s._v("--restart")]),e("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=")]),s._v("always "),e("span",{pre:!0,attrs:{class:"token parameter variable"}},[s._v("--name")]),s._v(" redis-test "),e("span",{pre:!0,attrs:{class:"token parameter variable"}},[s._v("-p")]),s._v(" "),e("span",{pre:!0,attrs:{class:"token number"}},[s._v("15001")]),s._v(":6379 "),e("span",{pre:!0,attrs:{class:"token parameter variable"}},[s._v("-v")]),s._v(" /home/redistest:/data redis redis-server "),e("span",{pre:!0,attrs:{class:"token parameter variable"}},[s._v("--requirepass")]),s._v(" "),e("span",{pre:!0,attrs:{class:"token number"}},[s._v("123456")]),s._v("\n")])])]),e("p",[s._v("使用下列命令 查看 运行 日志")]),s._v(" "),e("div",{staticClass:"language-shell extra-class"},[e("pre",{pre:!0,attrs:{class:"language-shell"}},[e("code",[e("span",{pre:!0,attrs:{class:"token function"}},[s._v("docker")]),s._v(" logs "),e("span",{pre:!0,attrs:{class:"token parameter variable"}},[s._v("-f")]),s._v(" redis-test\n")])])]),e("div",{staticClass:"custom-block warning"},[e("p",{staticClass:"custom-block-title"},[s._v("WARNING")]),s._v(" "),e("p",[s._v("放置在公网访问的redis服务需要考虑几点：1. 防火墙规则有没有放行，运营商的防火墙有没有放行 2. bind的IP需要设置成为0.0.0.0，才能让其他所有的服务访问的到（不过这样做也不太安全，需要设置密码），最好是绑定到指定的IP，并设置访问密码")])]),s._v(" "),e("p",[s._v("安装方法3:")]),s._v(" "),e("p",[s._v("去 github上下载 redis.conf\n"),e("a",{attrs:{href:"https://github.com/redis/redis/blob/6.0.10/redis.conf",target:"_blank",rel:"noopener noreferrer"}},[s._v("redis.conf链接地址"),e("OutboundLink")],1)]),s._v(" "),e("p",[s._v("将 redis.conf 拷贝道 /home/myredisconf 目录下\n并修改三处")]),s._v(" "),e("ul",[e("li",[s._v("注释掉 "),e("code",[s._v("bind 127.0.0.1")])]),s._v(" "),e("li",[s._v("将"),e("code",[s._v("protected-mode")]),s._v(" 改成 "),e("code",[s._v("no")]),s._v(" 关闭")]),s._v(" "),e("li",[s._v("将 "),e("code",[s._v("appendonly")]),s._v(" 改成 "),e("code",[s._v("yes")])])]),s._v(" "),e("div",{staticClass:"language- extra-class"},[e("pre",{pre:!0,attrs:{class:"language-text"}},[e("code",[s._v("# bind 127.0.0.1\nprotected-mode no\nappendonly yes\n")])])]),e("p",[s._v("然后执行下列命令")]),s._v(" "),e("div",{staticClass:"language-shell extra-class"},[e("pre",{pre:!0,attrs:{class:"language-shell"}},[e("code",[e("span",{pre:!0,attrs:{class:"token function"}},[s._v("docker")]),s._v(" run "),e("span",{pre:!0,attrs:{class:"token parameter variable"}},[s._v("-p")]),s._v(" "),e("span",{pre:!0,attrs:{class:"token number"}},[s._v("6379")]),s._v(":6379 "),e("span",{pre:!0,attrs:{class:"token parameter variable"}},[s._v("--privileged")]),e("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=")]),s._v("true "),e("span",{pre:!0,attrs:{class:"token parameter variable"}},[s._v("--name")]),s._v(" redis "),e("span",{pre:!0,attrs:{class:"token parameter variable"}},[s._v("-v")]),s._v(" /home/myredisconf/redis.conf:/root/redis/redis.conf  "),e("span",{pre:!0,attrs:{class:"token parameter variable"}},[s._v("-v")]),s._v(" /home/myredis:/data   "),e("span",{pre:!0,attrs:{class:"token parameter variable"}},[s._v("-d")]),s._v(" "),e("span",{pre:!0,attrs:{class:"token parameter variable"}},[s._v("--restart")]),e("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=")]),s._v("always  redis:latest redis-server "),e("span",{pre:!0,attrs:{class:"token parameter variable"}},[s._v("--appendonly")]),s._v(" "),e("span",{pre:!0,attrs:{class:"token function"}},[s._v("yes")]),s._v("\n")])])]),e("p",[s._v("如果出现了 docker redis WARNING: IPv4 forwarding is disabled. Networking will not work. 错误，那么我们需要配置系统的/etc/sysctl.conf")]),s._v(" "),e("div",{staticClass:"language-shell extra-class"},[e("pre",{pre:!0,attrs:{class:"language-shell"}},[e("code",[s._v("\n"),e("span",{pre:!0,attrs:{class:"token function"}},[s._v("vi")]),s._v(" /etc/sysctl.conf\n\nnet.ipv4.ip_forward "),e("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=")]),s._v(" "),e("span",{pre:!0,attrs:{class:"token number"}},[s._v("1")]),s._v("  "),e("span",{pre:!0,attrs:{class:"token comment"}},[s._v("# 添加这段代码")]),s._v("\n\nsystemctl restart network "),e("span",{pre:!0,attrs:{class:"token operator"}},[s._v("&&")]),s._v(" systemctl restart "),e("span",{pre:!0,attrs:{class:"token function"}},[s._v("docker")]),s._v("  "),e("span",{pre:!0,attrs:{class:"token comment"}},[s._v("# 重启network服务 和 docker")]),s._v("\n\n"),e("span",{pre:!0,attrs:{class:"token function"}},[s._v("sysctl")]),s._v(" net.ipv4.ip_forward "),e("span",{pre:!0,attrs:{class:"token comment"}},[s._v("# 查看是否修改成功（备注：返回1 就是成功）")]),s._v("\n\n")])])]),e("h2",{attrs:{id:"redis-cli"}},[e("a",{staticClass:"header-anchor",attrs:{href:"#redis-cli"}},[s._v("#")]),s._v(" Redis Cli")]),s._v(" "),e("p",[e("a",{attrs:{href:"http://doc.redisfans.com/",target:"_blank",rel:"noopener noreferrer"}},[s._v("redis 命令参考"),e("OutboundLink")],1)]),s._v(" "),e("p",[e("a",{attrs:{href:"http://redisdoc.com/",target:"_blank",rel:"noopener noreferrer"}},[s._v("redis 命令参考"),e("OutboundLink")],1)]),s._v(" "),e("p",[s._v("常见的命令：")]),s._v(" "),e("p",[s._v("设置/取值 （String,Hash,List,Set）")]),s._v(" "),e("p",[s._v("进入 redis-cli")]),s._v(" "),e("div",{staticClass:"language-shell extra-class"},[e("pre",{pre:!0,attrs:{class:"language-shell"}},[e("code",[e("span",{pre:!0,attrs:{class:"token function"}},[s._v("docker")]),s._v(" "),e("span",{pre:!0,attrs:{class:"token builtin class-name"}},[s._v("exec")]),s._v(" "),e("span",{pre:!0,attrs:{class:"token parameter variable"}},[s._v("-it")]),s._v(" redis-test redis-cli\n\n"),e("span",{pre:!0,attrs:{class:"token comment"}},[s._v("# 或者 分两步进行也可以")]),s._v("\n\n"),e("span",{pre:!0,attrs:{class:"token function"}},[s._v("docker")]),s._v(" "),e("span",{pre:!0,attrs:{class:"token builtin class-name"}},[s._v("exec")]),s._v(" "),e("span",{pre:!0,attrs:{class:"token parameter variable"}},[s._v("-it")]),s._v(" redis-test /bin/bash\n\nredis-cli\n")])])]),e("h3",{attrs:{id:"connection-连接"}},[e("a",{staticClass:"header-anchor",attrs:{href:"#connection-连接"}},[s._v("#")]),s._v(" connection 连接")]),s._v(" "),e("p",[s._v(":::info")]),s._v(" "),e("p",[s._v("redis登录的两种方式：")]),s._v(" "),e("p",[s._v("比如redis运行在本机，密码是123456")]),s._v(" "),e("p",[s._v("命令行的方式：redis-cli -h 127.0.0.1 -a 123456，")]),s._v(" "),e("p",[s._v("使用命令行进入redis交互终端，redis-cli，然后再使用auth 123456进行登录。")]),s._v(" "),e("p",[s._v(":::")]),s._v(" "),e("p",[e("strong",[s._v("AUTH password")])]),s._v(" "),e("p",[s._v("通过设置配置文件中 "),e("code",[s._v("requirepass")]),s._v(" 项的值(使用命令 "),e("code",[s._v("CONFIG SET requirepass password")]),s._v(" )，可以使用密码来保护 Redis 服务器。")]),s._v(" "),e("p",[s._v("如果开启了密码保护的话，在每次连接 Redis 服务器之后，就要使用 "),e("code",[s._v("AUTH")]),s._v(" 命令解锁，解锁之后才能使用其他 Redis 命令。")]),s._v(" "),e("p",[s._v("如果 "),e("code",[s._v("AUTH")]),s._v(" 命令给定的密码 "),e("code",[s._v("password")]),s._v(" 和配置文件中的密码相符的话，服务器会返回 "),e("code",[s._v("OK")]),s._v(" 并开始接受命令输入。")]),s._v(" "),e("p",[s._v("另一方面，假如密码不匹配的话，服务器将返回一个错误，并要求客户端需重新输入密码。")]),s._v(" "),e("div",{staticClass:"language-she extra-class"},[e("pre",{pre:!0,attrs:{class:"language-text"}},[e("code",[s._v("auth 123456\n")])])]),e("div",{staticClass:"language-shell extra-class"},[e("pre",{pre:!0,attrs:{class:"language-shell"}},[e("code",[e("span",{pre:!0,attrs:{class:"token comment"}},[s._v("# 设置密码")]),s._v("\n\nredis"),e("span",{pre:!0,attrs:{class:"token operator"}},[s._v(">")]),s._v(" CONFIG SET requirepass secret_password   "),e("span",{pre:!0,attrs:{class:"token comment"}},[s._v("# 将密码设置为 secret_password")]),s._v("\nOK\n\nredis"),e("span",{pre:!0,attrs:{class:"token operator"}},[s._v(">")]),s._v(" QUIT                                     "),e("span",{pre:!0,attrs:{class:"token comment"}},[s._v("# 退出再连接，让新密码对客户端生效")]),s._v("\n\n"),e("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("[")]),s._v("huangz@mypad"),e("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("]")]),s._v("$ redis\n\nredis"),e("span",{pre:!0,attrs:{class:"token operator"}},[s._v(">")]),s._v(" PING                                     "),e("span",{pre:!0,attrs:{class:"token comment"}},[s._v("# 未验证密码，操作被拒绝")]),s._v("\n"),e("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("(")]),s._v("error"),e("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(")")]),s._v(" ERR operation not permitted\n\nredis"),e("span",{pre:!0,attrs:{class:"token operator"}},[s._v(">")]),s._v(" AUTH wrong_password_testing              "),e("span",{pre:!0,attrs:{class:"token comment"}},[s._v("# 尝试输入错误的密码")]),s._v("\n"),e("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("(")]),s._v("error"),e("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(")")]),s._v(" ERR invalid password\n\nredis"),e("span",{pre:!0,attrs:{class:"token operator"}},[s._v(">")]),s._v(" AUTH secret_password                     "),e("span",{pre:!0,attrs:{class:"token comment"}},[s._v("# 输入正确的密码")]),s._v("\nOK\n\nredis"),e("span",{pre:!0,attrs:{class:"token operator"}},[s._v(">")]),s._v(" PING                                     "),e("span",{pre:!0,attrs:{class:"token comment"}},[s._v("# 密码验证成功，可以正常操作命令了")]),s._v("\nPONG\n\n\n"),e("span",{pre:!0,attrs:{class:"token comment"}},[s._v("# 清空密码")]),s._v("\n\nredis"),e("span",{pre:!0,attrs:{class:"token operator"}},[s._v(">")]),s._v(" CONFIG SET requirepass "),e("span",{pre:!0,attrs:{class:"token string"}},[s._v('""')]),s._v("   "),e("span",{pre:!0,attrs:{class:"token comment"}},[s._v("# 通过将密码设为空字符来清空密码")]),s._v("\nOK\n\nredis"),e("span",{pre:!0,attrs:{class:"token operator"}},[s._v(">")]),s._v(" QUIT\n")])])]),e("p",[e("strong",[s._v("ECHO message")])]),s._v(" "),e("p",[s._v("打印一个特定的信息 "),e("code",[s._v("message")]),s._v(" ，测试时使用。")]),s._v(" "),e("div",{staticClass:"language-shell extra-class"},[e("pre",{pre:!0,attrs:{class:"language-shell"}},[e("code",[s._v("redis"),e("span",{pre:!0,attrs:{class:"token operator"}},[s._v(">")]),s._v(" ECHO "),e("span",{pre:!0,attrs:{class:"token string"}},[s._v('"Hello Moto"')]),s._v("\n"),e("span",{pre:!0,attrs:{class:"token string"}},[s._v('"Hello Moto"')]),s._v("\n\nredis"),e("span",{pre:!0,attrs:{class:"token operator"}},[s._v(">")]),s._v(" ECHO "),e("span",{pre:!0,attrs:{class:"token string"}},[s._v('"Goodbye Moto"')]),s._v("\n"),e("span",{pre:!0,attrs:{class:"token string"}},[s._v('"Goodbye Moto"')]),s._v("\n")])])]),e("p",[e("strong",[s._v("PING")])]),s._v(" "),e("p",[s._v("使用客户端向 Redis 服务器发送一个 "),e("code",[s._v("PING")]),s._v(" ，如果服务器运作正常的话，会返回一个 "),e("code",[s._v("PONG")]),s._v(" 。")]),s._v(" "),e("p",[s._v("通常用于测试与服务器的连接是否仍然生效，或者用于测量延迟值。")]),s._v(" "),e("div",{staticClass:"language-shell extra-class"},[e("pre",{pre:!0,attrs:{class:"language-shell"}},[e("code",[e("span",{pre:!0,attrs:{class:"token comment"}},[s._v("# 客户端和服务器连接正常")]),s._v("\n\nredis"),e("span",{pre:!0,attrs:{class:"token operator"}},[s._v(">")]),s._v(" PING\nPONG\n\n"),e("span",{pre:!0,attrs:{class:"token comment"}},[s._v("# 客户端和服务器连接不正常(网络不正常或服务器未能正常运行)")]),s._v("\n\nredis "),e("span",{pre:!0,attrs:{class:"token number"}},[s._v("127.0")]),s._v(".0.1:637"),e("span",{pre:!0,attrs:{class:"token operator"}},[e("span",{pre:!0,attrs:{class:"token file-descriptor important"}},[s._v("9")]),s._v(">")]),s._v(" PING\nCould not connect to Redis at "),e("span",{pre:!0,attrs:{class:"token number"}},[s._v("127.0")]),s._v(".0.1:6379: Connection refused\n")])])]),e("p",[e("strong",[s._v("QUIT")])]),s._v(" "),e("p",[s._v("请求服务器关闭与当前客户端的连接。")]),s._v(" "),e("p",[s._v("一旦所有等待中的回复(如果有的话)顺利写入到客户端，连接就会被关闭。")]),s._v(" "),e("div",{staticClass:"language-shell extra-class"},[e("pre",{pre:!0,attrs:{class:"language-shell"}},[e("code",[s._v("$ redis\n\nredis"),e("span",{pre:!0,attrs:{class:"token operator"}},[s._v(">")]),s._v(" QUIT\n\n$\n")])])]),e("p",[e("strong",[s._v("SELECT index")])]),s._v(" "),e("p",[s._v("切换到指定的数据库，数据库索引号 "),e("code",[s._v("index")]),s._v(" 用数字值指定，以 "),e("code",[s._v("0")]),s._v(" 作为起始索引值。")]),s._v(" "),e("p",[s._v("默认使用 "),e("code",[s._v("0")]),s._v(" 号数据库。")]),s._v(" "),e("div",{staticClass:"language-shell extra-class"},[e("pre",{pre:!0,attrs:{class:"language-shell"}},[e("code",[s._v("redis"),e("span",{pre:!0,attrs:{class:"token operator"}},[s._v(">")]),s._v(" SET db_number "),e("span",{pre:!0,attrs:{class:"token number"}},[s._v("0")]),s._v("         "),e("span",{pre:!0,attrs:{class:"token comment"}},[s._v("# 默认使用 0 号数据库")]),s._v("\nOK\n\nredis"),e("span",{pre:!0,attrs:{class:"token operator"}},[s._v(">")]),s._v(" SELECT "),e("span",{pre:!0,attrs:{class:"token number"}},[s._v("1")]),s._v("                "),e("span",{pre:!0,attrs:{class:"token comment"}},[s._v("# 使用 1 号数据库")]),s._v("\nOK\n\nredis"),e("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("[")]),e("span",{pre:!0,attrs:{class:"token number"}},[s._v("1")]),e("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("]")]),e("span",{pre:!0,attrs:{class:"token operator"}},[s._v(">")]),s._v(" GET db_number        "),e("span",{pre:!0,attrs:{class:"token comment"}},[s._v("# 已经切换到 1 号数据库，注意 Redis 现在的命令提示符多了个 [1]")]),s._v("\n"),e("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("(")]),s._v("nil"),e("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(")")]),s._v("\n\nredis"),e("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("[")]),e("span",{pre:!0,attrs:{class:"token number"}},[s._v("1")]),e("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("]")]),e("span",{pre:!0,attrs:{class:"token operator"}},[s._v(">")]),s._v(" SET db_number "),e("span",{pre:!0,attrs:{class:"token number"}},[s._v("1")]),s._v("\nOK\n\nredis"),e("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("[")]),e("span",{pre:!0,attrs:{class:"token number"}},[s._v("1")]),e("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("]")]),e("span",{pre:!0,attrs:{class:"token operator"}},[s._v(">")]),s._v(" GET db_number\n"),e("span",{pre:!0,attrs:{class:"token string"}},[s._v('"1"')]),s._v("\n\nredis"),e("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("[")]),e("span",{pre:!0,attrs:{class:"token number"}},[s._v("1")]),e("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("]")]),e("span",{pre:!0,attrs:{class:"token operator"}},[s._v(">")]),s._v(" SELECT "),e("span",{pre:!0,attrs:{class:"token number"}},[s._v("3")]),s._v("             "),e("span",{pre:!0,attrs:{class:"token comment"}},[s._v("# 再切换到 3 号数据库")]),s._v("\nOK\n\nredis"),e("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("[")]),e("span",{pre:!0,attrs:{class:"token number"}},[s._v("3")]),e("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("]")]),e("span",{pre:!0,attrs:{class:"token operator"}},[s._v(">")]),s._v("                      "),e("span",{pre:!0,attrs:{class:"token comment"}},[s._v("# 提示符从 [1] 改变成了 [3]")]),s._v("\n")])])]),e("h3",{attrs:{id:"string"}},[e("a",{staticClass:"header-anchor",attrs:{href:"#string"}},[s._v("#")]),s._v(" String")]),s._v(" "),e("p",[s._v("SET key value [EX seconds] [PX milliseconds] [NX|XX]**")]),s._v(" "),e("p",[s._v("将字符串值 "),e("code",[s._v("value")]),s._v(" 关联到 "),e("code",[s._v("key")]),s._v(" 。")]),s._v(" "),e("p",[s._v("如果 "),e("code",[s._v("key")]),s._v(" 已经持有其他值， "),e("a",{attrs:{href:"http://doc.redisfans.com/string/set.html#set",target:"_blank",rel:"noopener noreferrer"}},[s._v("SET"),e("OutboundLink")],1),s._v(" 就覆写旧值，无视类型。")]),s._v(" "),e("p",[s._v("对于某个原本带有生存时间（TTL）的键来说， 当 "),e("a",{attrs:{href:"http://doc.redisfans.com/string/set.html#set",target:"_blank",rel:"noopener noreferrer"}},[e("em",[s._v("SET")]),e("OutboundLink")],1),s._v(" 命令成功在这个键上执行时， 这个键原有的 TTL 将被清除。")]),s._v(" "),e("p",[s._v("从 Redis 2.6.12 版本开始， "),e("a",{attrs:{href:"http://doc.redisfans.com/string/set.html#set",target:"_blank",rel:"noopener noreferrer"}},[e("em",[s._v("SET")]),e("OutboundLink")],1),s._v(" 命令的行为可以通过一系列参数来修改：")]),s._v(" "),e("ul",[e("li",[e("code",[s._v("EX second")]),s._v(" ：设置键的过期时间为 "),e("code",[s._v("second")]),s._v(" 秒。 "),e("code",[s._v("SET key value EX second")]),s._v(" 效果等同于 "),e("code",[s._v("SETEX key second value")]),s._v(" 。")]),s._v(" "),e("li",[e("code",[s._v("PX millisecond")]),s._v(" ：设置键的过期时间为 "),e("code",[s._v("millisecond")]),s._v(" 毫秒。 "),e("code",[s._v("SET key value PX millisecond")]),s._v(" 效果等同于 "),e("code",[s._v("PSETEX key millisecond value")]),s._v(" 。")]),s._v(" "),e("li",[e("code",[s._v("NX")]),s._v(" ：只在键不存在时，才对键进行设置操作。 "),e("code",[s._v("SET key value NX")]),s._v(" 效果等同于 "),e("code",[s._v("SETNX key value")]),s._v(" 。")]),s._v(" "),e("li",[e("code",[s._v("XX")]),s._v(" ：只在键已经存在时，才对键进行设置操作。")])]),s._v(" "),e("div",{staticClass:"language-shell extra-class"},[e("pre",{pre:!0,attrs:{class:"language-shell"}},[e("code",[e("span",{pre:!0,attrs:{class:"token comment"}},[s._v("# 对不存在的键进行设置")]),s._v("\n\nredis "),e("span",{pre:!0,attrs:{class:"token number"}},[s._v("127.0")]),s._v(".0.1:637"),e("span",{pre:!0,attrs:{class:"token operator"}},[e("span",{pre:!0,attrs:{class:"token file-descriptor important"}},[s._v("9")]),s._v(">")]),s._v(" SET key "),e("span",{pre:!0,attrs:{class:"token string"}},[s._v('"value"')]),s._v("\nOK\n\nredis "),e("span",{pre:!0,attrs:{class:"token number"}},[s._v("127.0")]),s._v(".0.1:637"),e("span",{pre:!0,attrs:{class:"token operator"}},[e("span",{pre:!0,attrs:{class:"token file-descriptor important"}},[s._v("9")]),s._v(">")]),s._v(" GET key\n"),e("span",{pre:!0,attrs:{class:"token string"}},[s._v('"value"')]),s._v("\n\n\n"),e("span",{pre:!0,attrs:{class:"token comment"}},[s._v("# 对已存在的键进行设置")]),s._v("\n\nredis "),e("span",{pre:!0,attrs:{class:"token number"}},[s._v("127.0")]),s._v(".0.1:637"),e("span",{pre:!0,attrs:{class:"token operator"}},[e("span",{pre:!0,attrs:{class:"token file-descriptor important"}},[s._v("9")]),s._v(">")]),s._v(" SET key "),e("span",{pre:!0,attrs:{class:"token string"}},[s._v('"new-value"')]),s._v("\nOK\n\nredis "),e("span",{pre:!0,attrs:{class:"token number"}},[s._v("127.0")]),s._v(".0.1:637"),e("span",{pre:!0,attrs:{class:"token operator"}},[e("span",{pre:!0,attrs:{class:"token file-descriptor important"}},[s._v("9")]),s._v(">")]),s._v(" GET key\n"),e("span",{pre:!0,attrs:{class:"token string"}},[s._v('"new-value"')]),s._v("\n\n\n"),e("span",{pre:!0,attrs:{class:"token comment"}},[s._v("# 使用 EX 选项")]),s._v("\n\nredis "),e("span",{pre:!0,attrs:{class:"token number"}},[s._v("127.0")]),s._v(".0.1:637"),e("span",{pre:!0,attrs:{class:"token operator"}},[e("span",{pre:!0,attrs:{class:"token file-descriptor important"}},[s._v("9")]),s._v(">")]),s._v(" SET key-with-expire-time "),e("span",{pre:!0,attrs:{class:"token string"}},[s._v('"hello"')]),s._v(" EX "),e("span",{pre:!0,attrs:{class:"token number"}},[s._v("10086")]),s._v("\nOK\n\nredis "),e("span",{pre:!0,attrs:{class:"token number"}},[s._v("127.0")]),s._v(".0.1:637"),e("span",{pre:!0,attrs:{class:"token operator"}},[e("span",{pre:!0,attrs:{class:"token file-descriptor important"}},[s._v("9")]),s._v(">")]),s._v(" GET key-with-expire-time\n"),e("span",{pre:!0,attrs:{class:"token string"}},[s._v('"hello"')]),s._v("\n\nredis "),e("span",{pre:!0,attrs:{class:"token number"}},[s._v("127.0")]),s._v(".0.1:637"),e("span",{pre:!0,attrs:{class:"token operator"}},[e("span",{pre:!0,attrs:{class:"token file-descriptor important"}},[s._v("9")]),s._v(">")]),s._v(" TTL key-with-expire-time\n"),e("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("(")]),s._v("integer"),e("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(")")]),s._v(" "),e("span",{pre:!0,attrs:{class:"token number"}},[s._v("10069")]),s._v("\n\n\n"),e("span",{pre:!0,attrs:{class:"token comment"}},[s._v("# 使用 PX 选项")]),s._v("\n\nredis "),e("span",{pre:!0,attrs:{class:"token number"}},[s._v("127.0")]),s._v(".0.1:637"),e("span",{pre:!0,attrs:{class:"token operator"}},[e("span",{pre:!0,attrs:{class:"token file-descriptor important"}},[s._v("9")]),s._v(">")]),s._v(" SET key-with-pexpire-time "),e("span",{pre:!0,attrs:{class:"token string"}},[s._v('"moto"')]),s._v(" PX "),e("span",{pre:!0,attrs:{class:"token number"}},[s._v("123321")]),s._v("\nOK\n\nredis "),e("span",{pre:!0,attrs:{class:"token number"}},[s._v("127.0")]),s._v(".0.1:637"),e("span",{pre:!0,attrs:{class:"token operator"}},[e("span",{pre:!0,attrs:{class:"token file-descriptor important"}},[s._v("9")]),s._v(">")]),s._v(" GET key-with-pexpire-time\n"),e("span",{pre:!0,attrs:{class:"token string"}},[s._v('"moto"')]),s._v("\n\nredis "),e("span",{pre:!0,attrs:{class:"token number"}},[s._v("127.0")]),s._v(".0.1:637"),e("span",{pre:!0,attrs:{class:"token operator"}},[e("span",{pre:!0,attrs:{class:"token file-descriptor important"}},[s._v("9")]),s._v(">")]),s._v(" PTTL key-with-pexpire-time\n"),e("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("(")]),s._v("integer"),e("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(")")]),s._v(" "),e("span",{pre:!0,attrs:{class:"token number"}},[s._v("111939")]),s._v("\n\n\n"),e("span",{pre:!0,attrs:{class:"token comment"}},[s._v("# 使用 NX 选项")]),s._v("\n\nredis "),e("span",{pre:!0,attrs:{class:"token number"}},[s._v("127.0")]),s._v(".0.1:637"),e("span",{pre:!0,attrs:{class:"token operator"}},[e("span",{pre:!0,attrs:{class:"token file-descriptor important"}},[s._v("9")]),s._v(">")]),s._v(" SET not-exists-key "),e("span",{pre:!0,attrs:{class:"token string"}},[s._v('"value"')]),s._v(" NX\nOK      "),e("span",{pre:!0,attrs:{class:"token comment"}},[s._v("# 键不存在，设置成功")]),s._v("\n\nredis "),e("span",{pre:!0,attrs:{class:"token number"}},[s._v("127.0")]),s._v(".0.1:637"),e("span",{pre:!0,attrs:{class:"token operator"}},[e("span",{pre:!0,attrs:{class:"token file-descriptor important"}},[s._v("9")]),s._v(">")]),s._v(" GET not-exists-key\n"),e("span",{pre:!0,attrs:{class:"token string"}},[s._v('"value"')]),s._v("\n\nredis "),e("span",{pre:!0,attrs:{class:"token number"}},[s._v("127.0")]),s._v(".0.1:637"),e("span",{pre:!0,attrs:{class:"token operator"}},[e("span",{pre:!0,attrs:{class:"token file-descriptor important"}},[s._v("9")]),s._v(">")]),s._v(" SET not-exists-key "),e("span",{pre:!0,attrs:{class:"token string"}},[s._v('"new-value"')]),s._v(" NX\n"),e("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("(")]),s._v("nil"),e("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(")")]),s._v("   "),e("span",{pre:!0,attrs:{class:"token comment"}},[s._v("# 键已经存在，设置失败")]),s._v("\n\nredis "),e("span",{pre:!0,attrs:{class:"token number"}},[s._v("127.0")]),s._v(".0.1:637"),e("span",{pre:!0,attrs:{class:"token operator"}},[e("span",{pre:!0,attrs:{class:"token file-descriptor important"}},[s._v("9")]),s._v(">")]),s._v(" GEt not-exists-key\n"),e("span",{pre:!0,attrs:{class:"token string"}},[s._v('"value"')]),s._v(" "),e("span",{pre:!0,attrs:{class:"token comment"}},[s._v("# 维持原值不变")]),s._v("\n\n\n"),e("span",{pre:!0,attrs:{class:"token comment"}},[s._v("# 使用 XX 选项")]),s._v("\n\nredis "),e("span",{pre:!0,attrs:{class:"token number"}},[s._v("127.0")]),s._v(".0.1:637"),e("span",{pre:!0,attrs:{class:"token operator"}},[e("span",{pre:!0,attrs:{class:"token file-descriptor important"}},[s._v("9")]),s._v(">")]),s._v(" EXISTS exists-key\n"),e("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("(")]),s._v("integer"),e("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(")")]),s._v(" "),e("span",{pre:!0,attrs:{class:"token number"}},[s._v("0")]),s._v("\n\nredis "),e("span",{pre:!0,attrs:{class:"token number"}},[s._v("127.0")]),s._v(".0.1:637"),e("span",{pre:!0,attrs:{class:"token operator"}},[e("span",{pre:!0,attrs:{class:"token file-descriptor important"}},[s._v("9")]),s._v(">")]),s._v(" SET exists-key "),e("span",{pre:!0,attrs:{class:"token string"}},[s._v('"value"')]),s._v(" XX\n"),e("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("(")]),s._v("nil"),e("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(")")]),s._v("   "),e("span",{pre:!0,attrs:{class:"token comment"}},[s._v("# 因为键不存在，设置失败")]),s._v("\n\nredis "),e("span",{pre:!0,attrs:{class:"token number"}},[s._v("127.0")]),s._v(".0.1:637"),e("span",{pre:!0,attrs:{class:"token operator"}},[e("span",{pre:!0,attrs:{class:"token file-descriptor important"}},[s._v("9")]),s._v(">")]),s._v(" SET exists-key "),e("span",{pre:!0,attrs:{class:"token string"}},[s._v('"value"')]),s._v("\nOK      "),e("span",{pre:!0,attrs:{class:"token comment"}},[s._v("# 先给键设置一个值")]),s._v("\n\nredis "),e("span",{pre:!0,attrs:{class:"token number"}},[s._v("127.0")]),s._v(".0.1:637"),e("span",{pre:!0,attrs:{class:"token operator"}},[e("span",{pre:!0,attrs:{class:"token file-descriptor important"}},[s._v("9")]),s._v(">")]),s._v(" SET exists-key "),e("span",{pre:!0,attrs:{class:"token string"}},[s._v('"new-value"')]),s._v(" XX\nOK      "),e("span",{pre:!0,attrs:{class:"token comment"}},[s._v("# 设置新值成功")]),s._v("\n\nredis "),e("span",{pre:!0,attrs:{class:"token number"}},[s._v("127.0")]),s._v(".0.1:637"),e("span",{pre:!0,attrs:{class:"token operator"}},[e("span",{pre:!0,attrs:{class:"token file-descriptor important"}},[s._v("9")]),s._v(">")]),s._v(" GET exists-key\n"),e("span",{pre:!0,attrs:{class:"token string"}},[s._v('"new-value"')]),s._v("\n\n\n"),e("span",{pre:!0,attrs:{class:"token comment"}},[s._v("# NX 或 XX 可以和 EX 或者 PX 组合使用")]),s._v("\n\nredis "),e("span",{pre:!0,attrs:{class:"token number"}},[s._v("127.0")]),s._v(".0.1:637"),e("span",{pre:!0,attrs:{class:"token operator"}},[e("span",{pre:!0,attrs:{class:"token file-descriptor important"}},[s._v("9")]),s._v(">")]),s._v(" SET key-with-expire-and-NX "),e("span",{pre:!0,attrs:{class:"token string"}},[s._v('"hello"')]),s._v(" EX "),e("span",{pre:!0,attrs:{class:"token number"}},[s._v("10086")]),s._v(" NX\nOK\n\nredis "),e("span",{pre:!0,attrs:{class:"token number"}},[s._v("127.0")]),s._v(".0.1:637"),e("span",{pre:!0,attrs:{class:"token operator"}},[e("span",{pre:!0,attrs:{class:"token file-descriptor important"}},[s._v("9")]),s._v(">")]),s._v(" GET key-with-expire-and-NX\n"),e("span",{pre:!0,attrs:{class:"token string"}},[s._v('"hello"')]),s._v("\n\nredis "),e("span",{pre:!0,attrs:{class:"token number"}},[s._v("127.0")]),s._v(".0.1:637"),e("span",{pre:!0,attrs:{class:"token operator"}},[e("span",{pre:!0,attrs:{class:"token file-descriptor important"}},[s._v("9")]),s._v(">")]),s._v(" TTL key-with-expire-and-NX\n"),e("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("(")]),s._v("integer"),e("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(")")]),s._v(" "),e("span",{pre:!0,attrs:{class:"token number"}},[s._v("10063")]),s._v("\n\nredis "),e("span",{pre:!0,attrs:{class:"token number"}},[s._v("127.0")]),s._v(".0.1:637"),e("span",{pre:!0,attrs:{class:"token operator"}},[e("span",{pre:!0,attrs:{class:"token file-descriptor important"}},[s._v("9")]),s._v(">")]),s._v(" SET key-with-pexpire-and-XX "),e("span",{pre:!0,attrs:{class:"token string"}},[s._v('"old value"')]),s._v("\nOK\n\nredis "),e("span",{pre:!0,attrs:{class:"token number"}},[s._v("127.0")]),s._v(".0.1:637"),e("span",{pre:!0,attrs:{class:"token operator"}},[e("span",{pre:!0,attrs:{class:"token file-descriptor important"}},[s._v("9")]),s._v(">")]),s._v(" SET key-with-pexpire-and-XX "),e("span",{pre:!0,attrs:{class:"token string"}},[s._v('"new value"')]),s._v(" PX "),e("span",{pre:!0,attrs:{class:"token number"}},[s._v("123321")]),s._v("\nOK\n\nredis "),e("span",{pre:!0,attrs:{class:"token number"}},[s._v("127.0")]),s._v(".0.1:637"),e("span",{pre:!0,attrs:{class:"token operator"}},[e("span",{pre:!0,attrs:{class:"token file-descriptor important"}},[s._v("9")]),s._v(">")]),s._v(" GET key-with-pexpire-and-XX\n"),e("span",{pre:!0,attrs:{class:"token string"}},[s._v('"new value"')]),s._v("\n\nredis "),e("span",{pre:!0,attrs:{class:"token number"}},[s._v("127.0")]),s._v(".0.1:637"),e("span",{pre:!0,attrs:{class:"token operator"}},[e("span",{pre:!0,attrs:{class:"token file-descriptor important"}},[s._v("9")]),s._v(">")]),s._v(" PTTL key-with-pexpire-and-XX\n"),e("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("(")]),s._v("integer"),e("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(")")]),s._v(" "),e("span",{pre:!0,attrs:{class:"token number"}},[s._v("112999")]),s._v("\n\n\n"),e("span",{pre:!0,attrs:{class:"token comment"}},[s._v("# EX 和 PX 可以同时出现，但后面给出的选项会覆盖前面给出的选项")]),s._v("\n\nredis "),e("span",{pre:!0,attrs:{class:"token number"}},[s._v("127.0")]),s._v(".0.1:637"),e("span",{pre:!0,attrs:{class:"token operator"}},[e("span",{pre:!0,attrs:{class:"token file-descriptor important"}},[s._v("9")]),s._v(">")]),s._v(" SET key "),e("span",{pre:!0,attrs:{class:"token string"}},[s._v('"value"')]),s._v(" EX "),e("span",{pre:!0,attrs:{class:"token number"}},[s._v("1000")]),s._v(" PX "),e("span",{pre:!0,attrs:{class:"token number"}},[s._v("5000000")]),s._v("\nOK\n\nredis "),e("span",{pre:!0,attrs:{class:"token number"}},[s._v("127.0")]),s._v(".0.1:637"),e("span",{pre:!0,attrs:{class:"token operator"}},[e("span",{pre:!0,attrs:{class:"token file-descriptor important"}},[s._v("9")]),s._v(">")]),s._v(" TTL key\n"),e("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("(")]),s._v("integer"),e("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(")")]),s._v(" "),e("span",{pre:!0,attrs:{class:"token number"}},[s._v("4993")]),s._v("  "),e("span",{pre:!0,attrs:{class:"token comment"}},[s._v("# 这是 PX 参数设置的值")]),s._v("\n\nredis "),e("span",{pre:!0,attrs:{class:"token number"}},[s._v("127.0")]),s._v(".0.1:637"),e("span",{pre:!0,attrs:{class:"token operator"}},[e("span",{pre:!0,attrs:{class:"token file-descriptor important"}},[s._v("9")]),s._v(">")]),s._v(" SET another-key "),e("span",{pre:!0,attrs:{class:"token string"}},[s._v('"value"')]),s._v(" PX "),e("span",{pre:!0,attrs:{class:"token number"}},[s._v("5000000")]),s._v(" EX "),e("span",{pre:!0,attrs:{class:"token number"}},[s._v("1000")]),s._v("\nOK\n\nredis "),e("span",{pre:!0,attrs:{class:"token number"}},[s._v("127.0")]),s._v(".0.1:637"),e("span",{pre:!0,attrs:{class:"token operator"}},[e("span",{pre:!0,attrs:{class:"token file-descriptor important"}},[s._v("9")]),s._v(">")]),s._v(" TTL another-key\n"),e("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("(")]),s._v("integer"),e("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(")")]),s._v(" "),e("span",{pre:!0,attrs:{class:"token number"}},[s._v("997")]),s._v("   "),e("span",{pre:!0,attrs:{class:"token comment"}},[s._v("# 这是 EX 参数设置的值")]),s._v("\n")])])]),e("p",[e("strong",[s._v("GET key")])]),s._v(" "),e("p",[s._v("返回 "),e("code",[s._v("key")]),s._v(" 所关联的字符串值。")]),s._v(" "),e("p",[s._v("如果 "),e("code",[s._v("key")]),s._v(" 不存在那么返回特殊值 "),e("code",[s._v("nil")]),s._v(" 。")]),s._v(" "),e("p",[s._v("假如 "),e("code",[s._v("key")]),s._v(" 储存的值不是字符串类型，返回一个错误，因为 "),e("a",{attrs:{href:"http://doc.redisfans.com/string/get.html#get",target:"_blank",rel:"noopener noreferrer"}},[s._v("GET"),e("OutboundLink")],1),s._v(" 只能用于处理字符串值。")]),s._v(" "),e("div",{staticClass:"language-shell extra-class"},[e("pre",{pre:!0,attrs:{class:"language-shell"}},[e("code",[e("span",{pre:!0,attrs:{class:"token comment"}},[s._v("# 对不存在的 key 或字符串类型 key 进行 GET")]),s._v("\n\nredis"),e("span",{pre:!0,attrs:{class:"token operator"}},[s._v(">")]),s._v(" GET db\n"),e("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("(")]),s._v("nil"),e("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(")")]),s._v("\n\nredis"),e("span",{pre:!0,attrs:{class:"token operator"}},[s._v(">")]),s._v(" SET db redis\nOK\n\nredis"),e("span",{pre:!0,attrs:{class:"token operator"}},[s._v(">")]),s._v(" GET db\n"),e("span",{pre:!0,attrs:{class:"token string"}},[s._v('"redis"')]),s._v("\n\n\n"),e("span",{pre:!0,attrs:{class:"token comment"}},[s._v("# 对不是字符串类型的 key 进行 GET")]),s._v("\n\nredis"),e("span",{pre:!0,attrs:{class:"token operator"}},[s._v(">")]),s._v(" DEL db\n"),e("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("(")]),s._v("integer"),e("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(")")]),s._v(" "),e("span",{pre:!0,attrs:{class:"token number"}},[s._v("1")]),s._v("\n\nredis"),e("span",{pre:!0,attrs:{class:"token operator"}},[s._v(">")]),s._v(" LPUSH db redis mongodb mysql\n"),e("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("(")]),s._v("integer"),e("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(")")]),s._v(" "),e("span",{pre:!0,attrs:{class:"token number"}},[s._v("3")]),s._v("\n\nredis"),e("span",{pre:!0,attrs:{class:"token operator"}},[s._v(">")]),s._v(" GET db\n"),e("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("(")]),s._v("error"),e("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(")")]),s._v(" ERR Operation against a key holding the wrong kind of value\n")])])]),e("h3",{attrs:{id:"key"}},[e("a",{staticClass:"header-anchor",attrs:{href:"#key"}},[s._v("#")]),s._v(" Key")]),s._v(" "),e("p",[e("strong",[s._v("KEYS pattern")])]),s._v(" "),e("p",[e("code",[s._v("KEYS *")]),s._v(" 匹配数据库中所有 "),e("code",[s._v("key")]),s._v(" 。")]),s._v(" "),e("p",[e("code",[s._v("KEYS h?llo")]),s._v(" 匹配 "),e("code",[s._v("hello")]),s._v(" ， "),e("code",[s._v("hallo")]),s._v(" 和 "),e("code",[s._v("hxllo")]),s._v(" 等。")]),s._v(" "),e("p",[e("code",[s._v("KEYS h*llo")]),s._v(" 匹配 "),e("code",[s._v("hllo")]),s._v(" 和 "),e("code",[s._v("heeeeello")]),s._v(" 等。")]),s._v(" "),e("p",[e("code",[s._v("KEYS h[ae]llo")]),s._v(" 匹配 "),e("code",[s._v("hello")]),s._v(" 和 "),e("code",[s._v("hallo")]),s._v(" ，但不匹配 "),e("code",[s._v("hillo")]),s._v(" 。")]),s._v(" "),e("p",[s._v("特殊符号用 "),e("code",[s._v("\\")]),s._v(" 隔开")]),s._v(" "),e("div",{staticClass:"custom-block warning"},[e("p",{staticClass:"custom-block-title"},[s._v("WARNING")]),s._v(" "),e("p",[e("a",{attrs:{href:"http://doc.redisfans.com/key/keys.html#keys",target:"_blank",rel:"noopener noreferrer"}},[s._v("KEYS"),e("OutboundLink")],1),s._v(" 的速度非常快，但在一个大的数据库中使用它仍然可能造成性能问题，如果你需要从一个数据集中查找特定的 "),e("code",[s._v("key")]),s._v(" ，你最好还是用 Redis 的集合结构(set)来代替。")])]),s._v(" "),e("div",{staticClass:"language-shell extra-class"},[e("pre",{pre:!0,attrs:{class:"language-shell"}},[e("code",[s._v("redis"),e("span",{pre:!0,attrs:{class:"token operator"}},[s._v(">")]),s._v(" MSET one "),e("span",{pre:!0,attrs:{class:"token number"}},[s._v("1")]),s._v(" two "),e("span",{pre:!0,attrs:{class:"token number"}},[s._v("2")]),s._v(" three "),e("span",{pre:!0,attrs:{class:"token number"}},[s._v("3")]),s._v(" four "),e("span",{pre:!0,attrs:{class:"token number"}},[s._v("4")]),s._v("  "),e("span",{pre:!0,attrs:{class:"token comment"}},[s._v("# 一次设置 4 个 key")]),s._v("\nOK\n\nredis"),e("span",{pre:!0,attrs:{class:"token operator"}},[s._v(">")]),s._v(" KEYS *o*\n"),e("span",{pre:!0,attrs:{class:"token number"}},[s._v("1")]),e("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(")")]),s._v(" "),e("span",{pre:!0,attrs:{class:"token string"}},[s._v('"four"')]),s._v("\n"),e("span",{pre:!0,attrs:{class:"token number"}},[s._v("2")]),e("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(")")]),s._v(" "),e("span",{pre:!0,attrs:{class:"token string"}},[s._v('"two"')]),s._v("\n"),e("span",{pre:!0,attrs:{class:"token number"}},[s._v("3")]),e("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(")")]),s._v(" "),e("span",{pre:!0,attrs:{class:"token string"}},[s._v('"one"')]),s._v("\n\nredis"),e("span",{pre:!0,attrs:{class:"token operator"}},[s._v(">")]),s._v(" KEYS t??\n"),e("span",{pre:!0,attrs:{class:"token number"}},[s._v("1")]),e("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(")")]),s._v(" "),e("span",{pre:!0,attrs:{class:"token string"}},[s._v('"two"')]),s._v("\n\nredis"),e("span",{pre:!0,attrs:{class:"token operator"}},[s._v(">")]),s._v(" KEYS t"),e("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("[")]),s._v("w"),e("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("]")]),s._v("*\n"),e("span",{pre:!0,attrs:{class:"token number"}},[s._v("1")]),e("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(")")]),s._v(" "),e("span",{pre:!0,attrs:{class:"token string"}},[s._v('"two"')]),s._v("\n\nredis"),e("span",{pre:!0,attrs:{class:"token operator"}},[s._v(">")]),s._v(" KEYS *  "),e("span",{pre:!0,attrs:{class:"token comment"}},[s._v("# 匹配数据库内所有 key")]),s._v("\n"),e("span",{pre:!0,attrs:{class:"token number"}},[s._v("1")]),e("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(")")]),s._v(" "),e("span",{pre:!0,attrs:{class:"token string"}},[s._v('"four"')]),s._v("\n"),e("span",{pre:!0,attrs:{class:"token number"}},[s._v("2")]),e("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(")")]),s._v(" "),e("span",{pre:!0,attrs:{class:"token string"}},[s._v('"three"')]),s._v("\n"),e("span",{pre:!0,attrs:{class:"token number"}},[s._v("3")]),e("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(")")]),s._v(" "),e("span",{pre:!0,attrs:{class:"token string"}},[s._v('"two"')]),s._v("\n"),e("span",{pre:!0,attrs:{class:"token number"}},[s._v("4")]),e("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(")")]),s._v(" "),e("span",{pre:!0,attrs:{class:"token string"}},[s._v('"one"')]),s._v("\n")])])]),e("h3",{attrs:{id:"哈希表-hash"}},[e("a",{staticClass:"header-anchor",attrs:{href:"#哈希表-hash"}},[s._v("#")]),s._v(" 哈希表 Hash")]),s._v(" "),e("p",[e("strong",[s._v("HSET key field value")])]),s._v(" "),e("p",[s._v("将哈希表 "),e("code",[s._v("key")]),s._v(" 中的域 "),e("code",[s._v("field")]),s._v(" 的值设为 "),e("code",[s._v("value")]),s._v(" 。")]),s._v(" "),e("p",[s._v("如果 "),e("code",[s._v("key")]),s._v(" 不存在，一个新的哈希表被创建并进行 "),e("a",{attrs:{href:"http://doc.redisfans.com/hash/hset.html#hset",target:"_blank",rel:"noopener noreferrer"}},[s._v("HSET"),e("OutboundLink")],1),s._v(" 操作。")]),s._v(" "),e("p",[s._v("如果域 "),e("code",[s._v("field")]),s._v(" 已经存在于哈希表中，旧值将被覆盖。")]),s._v(" "),e("div",{staticClass:"language-shell extra-class"},[e("pre",{pre:!0,attrs:{class:"language-shell"}},[e("code",[s._v("redis"),e("span",{pre:!0,attrs:{class:"token operator"}},[s._v(">")]),s._v(" HSET website google "),e("span",{pre:!0,attrs:{class:"token string"}},[s._v('"www.g.cn"')]),s._v("       "),e("span",{pre:!0,attrs:{class:"token comment"}},[s._v("# 设置一个新域")]),s._v("\n"),e("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("(")]),s._v("integer"),e("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(")")]),s._v(" "),e("span",{pre:!0,attrs:{class:"token number"}},[s._v("1")]),s._v("\n\nredis"),e("span",{pre:!0,attrs:{class:"token operator"}},[s._v(">")]),s._v(" HSET website google "),e("span",{pre:!0,attrs:{class:"token string"}},[s._v('"www.google.com"')]),s._v(" "),e("span",{pre:!0,attrs:{class:"token comment"}},[s._v("# 覆盖一个旧域")]),s._v("\n"),e("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("(")]),s._v("integer"),e("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(")")]),s._v(" "),e("span",{pre:!0,attrs:{class:"token number"}},[s._v("0")]),s._v("\n")])])]),e("p",[e("strong",[s._v("HGET key field")])]),s._v(" "),e("p",[s._v("返回哈希表 "),e("code",[s._v("key")]),s._v(" 中给定域 "),e("code",[s._v("field")]),s._v(" 的值")]),s._v(" "),e("div",{staticClass:"language-shell extra-class"},[e("pre",{pre:!0,attrs:{class:"language-shell"}},[e("code",[e("span",{pre:!0,attrs:{class:"token comment"}},[s._v("# 域存在")]),s._v("\n\nredis"),e("span",{pre:!0,attrs:{class:"token operator"}},[s._v(">")]),s._v(" HSET site redis redis.com\n"),e("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("(")]),s._v("integer"),e("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(")")]),s._v(" "),e("span",{pre:!0,attrs:{class:"token number"}},[s._v("1")]),s._v("\n\nredis"),e("span",{pre:!0,attrs:{class:"token operator"}},[s._v(">")]),s._v(" HGET site redis\n"),e("span",{pre:!0,attrs:{class:"token string"}},[s._v('"redis.com"')]),s._v("\n\n\n"),e("span",{pre:!0,attrs:{class:"token comment"}},[s._v("# 域不存在")]),s._v("\n\nredis"),e("span",{pre:!0,attrs:{class:"token operator"}},[s._v(">")]),s._v(" HGET site mysql\n"),e("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("(")]),s._v("nil"),e("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(")")]),s._v("\n")])])]),e("p",[e("strong",[s._v("HGETALL key")])]),s._v(" "),e("p",[s._v("返回哈希表 "),e("code",[s._v("key")]),s._v(" 中，所有的域和值。")]),s._v(" "),e("p",[s._v("在返回值里，紧跟每个域名(field name)之后是域的值(value)，所以返回值的长度是哈希表大小的两倍。")]),s._v(" "),e("div",{staticClass:"language-shell extra-class"},[e("pre",{pre:!0,attrs:{class:"language-shell"}},[e("code",[s._v("redis"),e("span",{pre:!0,attrs:{class:"token operator"}},[s._v(">")]),s._v(" HSET people jack "),e("span",{pre:!0,attrs:{class:"token string"}},[s._v('"Jack Sparrow"')]),s._v("\n"),e("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("(")]),s._v("integer"),e("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(")")]),s._v(" "),e("span",{pre:!0,attrs:{class:"token number"}},[s._v("1")]),s._v("\n\nredis"),e("span",{pre:!0,attrs:{class:"token operator"}},[s._v(">")]),s._v(" HSET people gump "),e("span",{pre:!0,attrs:{class:"token string"}},[s._v('"Forrest Gump"')]),s._v("\n"),e("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("(")]),s._v("integer"),e("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(")")]),s._v(" "),e("span",{pre:!0,attrs:{class:"token number"}},[s._v("1")]),s._v("\n\nredis"),e("span",{pre:!0,attrs:{class:"token operator"}},[s._v(">")]),s._v(" HGETALL people\n"),e("span",{pre:!0,attrs:{class:"token number"}},[s._v("1")]),e("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(")")]),s._v(" "),e("span",{pre:!0,attrs:{class:"token string"}},[s._v('"jack"')]),s._v("          "),e("span",{pre:!0,attrs:{class:"token comment"}},[s._v("# 域")]),s._v("\n"),e("span",{pre:!0,attrs:{class:"token number"}},[s._v("2")]),e("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(")")]),s._v(" "),e("span",{pre:!0,attrs:{class:"token string"}},[s._v('"Jack Sparrow"')]),s._v("  "),e("span",{pre:!0,attrs:{class:"token comment"}},[s._v("# 值")]),s._v("\n"),e("span",{pre:!0,attrs:{class:"token number"}},[s._v("3")]),e("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(")")]),s._v(" "),e("span",{pre:!0,attrs:{class:"token string"}},[s._v('"gump"')]),s._v("\n"),e("span",{pre:!0,attrs:{class:"token number"}},[s._v("4")]),e("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(")")]),s._v(" "),e("span",{pre:!0,attrs:{class:"token string"}},[s._v('"Forrest Gump"')]),s._v("\n")])])]),e("p",[e("strong",[s._v("HMSET key field value [field value ...]")])]),s._v(" "),e("p",[s._v("同时将多个 "),e("code",[s._v("field-value")]),s._v(" (域-值)对设置到哈希表 "),e("code",[s._v("key")]),s._v(" 中。")]),s._v(" "),e("p",[s._v("此命令会覆盖哈希表中已存在的域。")]),s._v(" "),e("p",[s._v("如果 "),e("code",[s._v("key")]),s._v(" 不存在，一个空哈希表被创建并执行 "),e("a",{attrs:{href:"http://doc.redisfans.com/hash/hmset.html#hmset",target:"_blank",rel:"noopener noreferrer"}},[s._v("HMSET"),e("OutboundLink")],1),s._v(" 操作。")]),s._v(" "),e("div",{staticClass:"language-shell extra-class"},[e("pre",{pre:!0,attrs:{class:"language-shell"}},[e("code",[s._v("redis"),e("span",{pre:!0,attrs:{class:"token operator"}},[s._v(">")]),s._v(" HMSET website google www.google.com yahoo www.yahoo.com\nOK\n\nredis"),e("span",{pre:!0,attrs:{class:"token operator"}},[s._v(">")]),s._v(" HGET website google\n"),e("span",{pre:!0,attrs:{class:"token string"}},[s._v('"www.google.com"')]),s._v("\n\nredis"),e("span",{pre:!0,attrs:{class:"token operator"}},[s._v(">")]),s._v(" HGET website yahoo\n"),e("span",{pre:!0,attrs:{class:"token string"}},[s._v('"www.yahoo.com"')]),s._v("\n")])])]),e("p",[e("strong",[s._v("HMGET key field [field ...]")])]),s._v(" "),e("p",[s._v("返回哈希表 "),e("code",[s._v("key")]),s._v(" 中，一个或多个给定域的值。")]),s._v(" "),e("p",[s._v("如果给定的域不存在于哈希表，那么返回一个 "),e("code",[s._v("nil")]),s._v(" 值。")]),s._v(" "),e("p",[s._v("因为不存在的 "),e("code",[s._v("key")]),s._v(" 被当作一个空哈希表来处理，所以对一个不存在的 "),e("code",[s._v("key")]),s._v(" 进行 "),e("a",{attrs:{href:"http://doc.redisfans.com/hash/hmget.html#hmget",target:"_blank",rel:"noopener noreferrer"}},[s._v("HMGET"),e("OutboundLink")],1),s._v(" 操作将返回一个只带有 "),e("code",[s._v("nil")]),s._v(" 值的表。")]),s._v(" "),e("div",{staticClass:"language-shell extra-class"},[e("pre",{pre:!0,attrs:{class:"language-shell"}},[e("code",[s._v("redis"),e("span",{pre:!0,attrs:{class:"token operator"}},[s._v(">")]),s._v(" HMSET pet dog "),e("span",{pre:!0,attrs:{class:"token string"}},[s._v('"doudou"')]),s._v(" "),e("span",{pre:!0,attrs:{class:"token function"}},[s._v("cat")]),s._v(" "),e("span",{pre:!0,attrs:{class:"token string"}},[s._v('"nounou"')]),s._v("    "),e("span",{pre:!0,attrs:{class:"token comment"}},[s._v("# 一次设置多个域")]),s._v("\nOK\n\nredis"),e("span",{pre:!0,attrs:{class:"token operator"}},[s._v(">")]),s._v(" HMGET pet dog "),e("span",{pre:!0,attrs:{class:"token function"}},[s._v("cat")]),s._v(" fake_pet             "),e("span",{pre:!0,attrs:{class:"token comment"}},[s._v("# 返回值的顺序和传入参数的顺序一样")]),s._v("\n"),e("span",{pre:!0,attrs:{class:"token number"}},[s._v("1")]),e("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(")")]),s._v(" "),e("span",{pre:!0,attrs:{class:"token string"}},[s._v('"doudou"')]),s._v("\n"),e("span",{pre:!0,attrs:{class:"token number"}},[s._v("2")]),e("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(")")]),s._v(" "),e("span",{pre:!0,attrs:{class:"token string"}},[s._v('"nounou"')]),s._v("\n"),e("span",{pre:!0,attrs:{class:"token number"}},[s._v("3")]),e("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(")")]),s._v(" "),e("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("(")]),s._v("nil"),e("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(")")]),s._v("                                      "),e("span",{pre:!0,attrs:{class:"token comment"}},[s._v("# 不存在的域返回nil值")]),s._v("\n")])])]),e("h3",{attrs:{id:"列表-list"}},[e("a",{staticClass:"header-anchor",attrs:{href:"#列表-list"}},[s._v("#")]),s._v(" 列表 List")]),s._v(" "),e("p",[e("strong",[s._v("LPOP key")]),s._v(": 移除并返回列表 "),e("code",[s._v("key")]),s._v(" 的头元素。")]),s._v(" "),e("p",[e("strong",[s._v("RPOP key")]),s._v(":移除并返回列表 "),e("code",[s._v("key")]),s._v(" 的尾元素。")]),s._v(" "),e("p",[e("strong",[s._v("LPUSH key value [value ...]")]),s._v(":将一个或多个值 "),e("code",[s._v("value")]),s._v(" 插入到列表 "),e("code",[s._v("key")]),s._v(" 的表头")]),s._v(" "),e("p",[e("strong",[s._v("RPUSH key value [value ...]")]),s._v(":将一个或多个值 "),e("code",[s._v("value")]),s._v(" 插入到列表 "),e("code",[s._v("key")]),s._v(" 的表尾(最右边)。")]),s._v(" "),e("h2",{attrs:{id:"配置-redis-conf-缓存redis-数据-生产需要"}},[e("a",{staticClass:"header-anchor",attrs:{href:"#配置-redis-conf-缓存redis-数据-生产需要"}},[s._v("#")]),s._v(" 配置 redis.conf , 缓存redis 数据（生产需要）")])])}),[],!1,null,null,null);t.default=n.exports}}]);